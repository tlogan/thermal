(

: call infixl d0 (a # f #) , f a

: make_nat_stream _ ,
  (
    alloc_chan _ call ch ,
    (
    : count i ,
      (
        sync (send (ch # i #) ;
        count (add (i # 1 #))
      )
    ) ;
    
    spawn (_ , count 0);
    ch
  )
) ;

make_nat_stream _ call nstream ,

(
: loop (
  | 0 => _
  | n => (
    sync (recv nstream);
    loop (sub (n # 1 #))
  )
) ;

loop 9

